{% extends 'components/baseb.html' %}
{% load static %}
{% block navbar %}{% endblock %}
{% block extra_styles %}
    <link rel="stylesheet" href="{% static 'css/manual_modal.css' %}">
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" href="{% static 'css/style_form.css' %}">
    <link rel="stylesheet" href="{% static 'css/botones.css' %}">
    <style>
        .modal-lg {
            max-width: 900px;
        }

        .modal-header {
            background-color: #25898D;
            color: white;
            border-bottom: none;
        }

        .modal-header .btn-close {
            background: none;
            border: none;
            color: white;
            opacity: 0.8;
        }

        .modal-header .btn-close:hover {
            opacity: 1;
        }

        .section-container {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #25898D;
            margin-bottom: 15px;
        }

        .section-title {
            color: #25898D;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .tipo-material-title {
            color: #25898D;
            font-weight: bold;
            text-align: center;
            font-size: 1.2em;
        }

        .info-text {
            background-color: white;
            padding: 8px 12px;
            border-radius: 4px;
            min-height: 35px;
            margin-bottom: 0;
            border: 1px solid #e9ecef;
            word-wrap: break-word;
        }

        .modal-footer .btn-primary {
            background-color: #25898D;
            border-color: #25898D;
        }

        .modal-footer .btn-primary:hover {
            background-color: #1e7075;
            border-color: #1e7075;
        }

        .modal-body {
            max-height: 70vh;
            overflow-y: auto;
        }

       #id_sede {
        padding:5px
       }

        /* Asegurar que solo el asterisco rojo sea visible y en negrita */
        .text-danger {
            color: #dc3545 !important;
            font-weight: bold !important;
        }
    </style>
{% endblock %}

{% block content %}
<div class="container-fluid">
    {% if success %}
        <div class="alert alert-success">{{ success }}</div>
    {% endif %}
    {% if error %}
        <div class="alert alert-danger">{{ error }}</div>
    {% endif %}

    <form id="form_alta_material" action="/alta-programa/" method="POST">
        {% csrf_token %}

        <!-- CAMPOS SIMPLIFICADOS - SOLO LOS NECESARIOS -->
        <div class="row">
            <div class="col-md-3 form-group mb-3">
                <label for="{{ form.profesor.id_for_label }}" style="font-size: 14px;">Profesor/a: <span class="text-danger">*</span></label>
                {{ form.profesor }}
                {% if form.profesor.errors %}
                    <div class="text-danger">{{ form.profesor.errors }}</div>
                {% endif %}
            </div>
            <div class="col-md-3 form-group mb-3">
                <label for="{{ form.carrera.id_for_label }}" style="font-size: 14px;">Carrera: <span class="text-danger">*</span></label>
                {{ form.carrera }}
                {% if form.carrera.errors %}
                    <div class="text-danger">{{ form.carrera.errors }}</div>
                {% endif %}
            </div>
            <div class="col-md-3 form-group mb-3">
                <label for="{{ form.materia.id_for_label }}" style="font-size: 14px;">Materia: <span class="text-danger">*</span></label>
                {{ form.materia }}
                {% if form.materia.errors %}
                    <div class="text-danger">{{ form.materia.errors }}</div>
                {% endif %}
            </div>
        </div>

        <div class="row">
            <div class="col-md-3 form-group mb-3">
                <label for="{{ form.ingresar_enlace.id_for_label }}" style="font-size: 14px;">Enlace (URL): <span class="text-danger">*</span></label>
                {{ form.ingresar_enlace }}
                {% if form.ingresar_enlace.errors %}
                    <div class="text-danger">{{ form.ingresar_enlace.errors }}</div>
                {% endif %}
            </div>
            <div class="col-md-3 form-group mb-3">
                <label for="{{ form.ciclo_lectivo.id_for_label }}" style="font-size: 14px;">Ciclo Lectivo: <span class="text-danger">*</span></label>
                {{ form.ciclo_lectivo }}
                {% if form.ciclo_lectivo.errors %}
                    <div class="text-danger">{{ form.ciclo_lectivo.errors }}</div>
                {% endif %}
            </div>
        </div>

        <!-- Botones -->
        <div class="row botones-container">
            <div class="col-12 d-flex justify-content-end gap-3">
                <button type="reset" class="btn btn-outline-danger btn-sm">CANCELAR</button>
                <button type="submit" class="btn btn-primary btn-sm">GUARDAR</button>
            </div>
        </div>
    </form>
</div>

<!-- Modal de Confirmaci√≥n de Alta de Material -->
<div class="modal fade" id="modalConfirmacionAltaMaterial" tabindex="-1" aria-labelledby="modalConfirmacionLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalConfirmacionLabel">CONFIRME LOS DATOS</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
          <!-- Tipo de Material -->
          <div class="section-container mb-4">
            <h6 class="tipo-material-title">TIPO DE MATERIAL: <span id="confirmTipoMaterial" class="text-primary"></span></h6>
          </div>

          <!-- Informaci√≥n Principal -->
          <div class="section-container mb-4">
            <h6 class="section-title">Informaci√≥n Principal</h6>
            <div class="row g-3">
              <div class="col-md-4">
                <strong>Profesor/a:</strong>
                <p id="confirmProfesor" class="info-text"></p>
              </div>
              <div class="col-md-4">
                <strong>Carrera:</strong>
                <p id="confirmCarrera" class="info-text"></p>
              </div>
              <div class="col-md-4">
                <strong>Materia:</strong>
                <p id="confirmMateria" class="info-text"></p>
              </div>
            </div>
          </div>

          <!-- Ciclo y Enlace -->
          <div class="section-container mb-4">
            <h6 class="section-title">Detalles Acad√©micos</h6>
            <div class="row g-3">
              <div class="col-md-6">
                <strong>Ciclo Lectivo:</strong>
                <p id="confirmCicloLectivo" class="info-text"></p>
              </div>
              <div class="col-md-6">
                <strong>Enlace (URL):</strong>
                <p id="confirmEnlace" class="info-text"></p>
              </div>
            </div>
          </div>

          <!-- Descripci√≥n -->
          <div class="section-container mb-4">
            <div class="row">
              <div class="col-12">
                <strong>Descripci√≥n:</strong>
                <p id="confirmDescripcion" class="info-text"></p>
              </div>
            </div>
          </div>

          <!-- Ubicaci√≥n y Disponibilidad -->
          <div class="section-container mb-4">
            <h6 class="section-title">Ubicaci√≥n y Disponibilidad</h6>
            <div class="row g-3">
              <div class="col-md-4">
                <strong>Sede:</strong>
                <p id="confirmSede" class="info-text"></p>
              </div>
              <div class="col-md-4">
                <strong>Disponibilidad:</strong>
                <p id="confirmDisponibilidad" class="info-text"></p>
              </div>
              <div class="col-md-4">
                <strong>Ejemplar N¬∞:</strong>
                <p id="confirmEjemplarNum" class="info-text"></p>
              </div>
            </div>
          </div>

          <!-- Observaciones -->
          <div class="section-container mb-4">
            <h6 class="section-title">Observaciones</h6>
            <div class="row">
              <div class="col-12">
                <p id="confirmObservaciones" class="info-text"></p>
              </div>
            </div>
          </div>

          <!-- Imagen -->
          <div class="section-container mb-4">
            <h6 class="section-title">Imagen</h6>
            <div class="row">
              <div class="col-12">
                <p id="confirmImagen" class="info-text"></p>
              </div>
            </div>
          </div>
        </div>  
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-primary" id="btnConfirmarAltaMaterial">Confirmar</button>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_scripts %}
<!-- SCRIPT CON DEPENDENCIA CARRERA-MATERIA -->
<script>
// Script para el formulario de programa (paste.txt - primer template)
document.addEventListener('DOMContentLoaded', function() {
    console.log('‚úÖ Formulario programa cargado');
    
    const form = document.getElementById('form_alta_material');
    const carreraSelect = document.getElementById('id_carrera');
    const materiaSelect = document.getElementById('id_materia');
    
    // Materias por carrera
    const materiasPorCarrera = {
            'Profesorado de Educaci√≥n Inicial': [
                "An√°lisis del Mundo Contempor√°neo",
                "Ateneo de Naturaleza y Sociedad",
                "Ateneo de Matem√°tica",
                "Ateneo de Nuevas Expresiones Est√©ticas",
                "Ateneo de Pr√°cticas del Lenguaje y la Literatura",
                "Corporeidad y Motricidad",
                "Cultura, Comunicaci√≥n y Educaci√≥n",
                "Did√°ctica de la Matem√°tica",
                "Did√°ctica de las Ciencias Naturales",
                "Did√°ctica de las Ciencias Sociales",
                "Did√°ctica de las Pr√°cticas del Lenguaje y la Literatura",
                "Did√°ctica General",
                "Did√°ctica y Curriculum de Nivel Inicial",
                "Dimensi√≥n √âtico-Pol√≠tica de la Praxis Docente",
                "Educaci√≥n en y para la Salud",
                "Educaci√≥n F√≠sica Escolar",
                "Educaci√≥n Musical",
                "Educaci√≥n Pl√°stica",
                "Educaci√≥n Temprana",
                "Filosof√≠a",
                "Historia y Prospectiva de la Educaci√≥n",
                "Juego y Desarrollo Infantil",
                "Medios Audiovisuales, TICs y Educaci√≥n",
                "Pedagog√≠a",
                "Pol√≠tica, Legislaci√≥n y Administraci√≥n del Trabajo Escolar",
                "Pr√°ctica Docente 1",
                "Pr√°ctica Docente 2",
                "Pr√°ctica Docente 3",
                "Pr√°ctica Docente 4",
                "Psicolog√≠a del Desarrollo y el Aprendizaje 1",
                "Psicolog√≠a del Desarrollo y el Aprendizaje 2",
                "Psicolog√≠a Social e Institucional",
                "Reflexi√≥n Filos√≥fica de la Educaci√≥n",
                "Taller de Ciencias Naturales",
                "Taller de Ciencias Sociales",
                "Taller de Definici√≥n Institucional",
                "Taller de Lectura, Escritura y Oralidad (LEO)",
                "Taller de Literatura Infantil",
                "Taller de la Matem√°tica",
                "Taller de Materiales y Objetos L√∫dicos",
                "Taller de Pensamiento L√≥gico Matem√°tico",
                "Teor√≠as Sociopol√≠ticas y Educaci√≥n",
                "Trayectos Formativos Opcionales"
            ],
            'Profesorado de Educaci√≥n Primaria': [
                "An√°lisis del Mundo Contempor√°neo",
                "Arte y Educaci√≥n",
                "Ateneo de Ciencias Naturales",
                "Ateneo de Ciencias Sociales",
                "Ateneo de Matem√°tica",
                "Ateneo de Pr√°cticas del Lenguaje y la Literatura",
                "Configuraciones Culturales del Sujeto Educativo de Primaria",
                "Corporeidad y Motricidad",
                "Cultura, Comunicaci√≥n y Educaci√≥n",
                "Did√°ctica de la Matem√°tica 1",
                "Did√°ctica de la Matem√°tica 2",
                "Did√°ctica de las Ciencias Naturales 1",
                "Did√°ctica de las Ciencias Naturales 2",
                "Did√°ctica de las Ciencias Sociales 1",
                "Did√°ctica de las Ciencias Sociales 2",
                "Did√°ctica de Pr√°cticas del Lenguaje y la Literatura 1",
                "Did√°ctica de Pr√°cticas del Lenguaje y la Literatura 2",
                "Did√°ctica General",
                "Did√°ctica y Curriculum de Nivel Primario",
                "Dimensi√≥n √âtico-Pol√≠tica de la Praxis Docente",
                "Educaci√≥n Art√≠stica",
                "Educaci√≥n F√≠sica Escolar",
                "Filosof√≠a",
                "Historia y Prospectiva de la Educaci√≥n",
                "Medios Audiovisuales, TICs y Educaci√≥n",
                "Pedagog√≠a",
                "Pedagog√≠a Cr√≠tica de las Diferencias",
                "Pol√≠tica, Legislaci√≥n y Administraci√≥n del Trabajo Escolar",
                "Pr√°ctica Docente 1",
                "Pr√°ctica Docente 2",
                "Pr√°ctica Docente 3",
                "Pr√°ctica Docente 4",
                "Psicolog√≠a del Desarrollo y el Aprendizaje 1",
                "Psicolog√≠a del Desarrollo y el Aprendizaje 2",
                "Psicolog√≠a Social e Institucional",
                "Reflexi√≥n Filos√≥fica de la Educaci√≥n",
                "Taller de Definici√≥n Institucional",
                "Taller de Lectura, Escritura y Oralidad (LEO)",
                "Taller de Pensamiento L√≥gico Matem√°tico",
                "Teor√≠as Sociopol√≠ticas y Educaci√≥n",
                "Trayectos Formativos Opcionales"
            ],
            'Profesorado de Educaci√≥n Secundaria en Geograf√≠a': [
                "Antropolog√≠a",
                "Cartograf√≠a",
                "Cartograf√≠a Digital",
                "Cultura Digital y Educaci√≥n",
                "Derechos, Interculturalidad y Ciudadan√≠a",
                "Did√°ctica de la Geograf√≠a",
                "Did√°ctica de las Ciencias Sociales",
                "Did√°ctica y Curriculum",
                "Econom√≠a Pol√≠tica",
                "Educaci√≥n Sexual Integral (ESI)",
                "Educaci√≥n y Transformaciones Sociales Contempor√°neas",
                "Ense√±anza de la Geograf√≠a",
                "Espacio de Opci√≥n Institucional (EOI)",
                "Geograf√≠a Ambiental",
                "Geograf√≠a Ambiental de Am√©rica Latina",
                "Geograf√≠a Ambiental de Argentina",
                "Geograf√≠a Cultural",
                "Geograf√≠a de G√©nero",
                "Geograf√≠a Econ√≥mica y Social Argentina",
                "Geograf√≠a Pol√≠tica y Geopol√≠tica",
                "Geograf√≠a Rural",
                "Geograf√≠a Social",
                "Geograf√≠a Social de Am√©rica Latina",
                "Geograf√≠a Urbana",
                "Historia de los Modelos Econ√≥micos de Argentina",
                "Historia Social General",
                "Introducci√≥n a las Ciencias Sociales y a la Geograf√≠a",
                "Organizaci√≥n Econ√≥mica del Espacio",
                "Pedagog√≠a",
                "Pr√°ctica Docente 1",
                "Pr√°ctica Docente 2",
                "Pr√°ctica Docente 3",
                "Pr√°ctica Docente 4",
                "Problemas Ambientales Locales/Regionales: La Investigaci√≥n en el Aula",
                "Problemas Filos√≥ficos de la Educaci√≥n",
                "Pol√≠tica Educativa Argentina",
                "Psicolog√≠a del Aprendizaje",
                "Reflexi√≥n Filos√≥fico-Pol√≠tica de la Pr√°ctica Docente",
                "Sociolog√≠a",
                "Teor√≠a y Metodolog√≠a en Geograf√≠a",
                "Trayectorias Educativas de J√≥venes y Adultos",
                "Unidades Curriculares Optativas"
            ],
            'Profesorado de Educaci√≥n Secundaria en Ciencias Pol√≠ticas': [
                "An√°lisis de las Instituciones Educativas",
                "Antropolog√≠a",
                "Cultura Digital y Educaci√≥n",
                "Derecho",
                "Derechos Humanos y Ciudadan√≠a",
                "Derechos, Interculturalidad y Ciudadan√≠a",
                "Did√°ctica de la Ciencia Pol√≠tica",
                "Did√°ctica de las Ciencias Sociales",
                "Did√°ctica y Curriculum",
                "Econom√≠a Pol√≠tica",
                "Educaci√≥n y Transformaciones Sociales Contempor√°neas",
                "Educaci√≥n Sexual Integral (ESI)",
                "Espacio de Opci√≥n Institucional (EOI)",
                "Estado, Administraci√≥n y Pol√≠ticas P√∫blicas",
                "Estado y Pol√≠tica de G√©nero",
                "Fundamentos de Ciencia Pol√≠tica",
                "Geograf√≠a",
                "Historia Argentina",
                "Historia Latinoamericana",
                "Historia Mundial",
                "Investigaci√≥n en la Ense√±anza de la Ciencia Pol√≠tica",
                "Opini√≥n P√∫blica, Medios y Pol√≠tica",
                "Pedagog√≠a",
                "Pensamiento Pol√≠tico Pedag√≥gico Latinoamericano",
                "Pol√≠tica Educativa Argentina",
                "Pr√°ctica Docente 1",
                "Pr√°ctica Docente 2",
                "Pr√°ctica Docente 3",
                "Pr√°ctica Docente 4",
                "Problemas Filos√≥ficos de la Educaci√≥n",
                "Problem√°tica y Pol√≠tica Ambiental",
                "Psicolog√≠a del Aprendizaje",
                "Reflexi√≥n Filos√≥fico-Pol√≠tica de la Pr√°ctica Docente",
                "Sistemas Pol√≠ticos Comparados",
                "Sociolog√≠a",
                "Teor√≠a de las Relaciones Internacionales y Pol√≠tica Internacional",
                "Teor√≠a Pol√≠tica 1",
                "Teor√≠a Pol√≠tica 2",
                "Teor√≠a Pol√≠tica 3",
                "Teor√≠a y Derecho Constitucional",
                "Unidades Curriculares Optativas"
            ],
            'Tecnicatura Superior en An√°lisis de Sistemas': [
                "√Ålgebra",
                "Algoritmos y estructuras de datos 1",
                "Algoritmos y estructuras de datos 2",
                "Algoritmos y estructuras de datos 3",
                "An√°lisis Matem√°tico 1",
                "An√°lisis Matem√°tico 2",
                "Arquitectura de Computadores",
                "Aspectos legales de la Profesi√≥n",
                "Base de Datos",
                "Ciencia, Tecnolog√≠a y Sociedad",
                "Estad√≠stica",
                "Ingenier√≠a de Software 1",
                "Ingenier√≠a de Software 2",
                "Ingl√©s 1",
                "Ingl√©s 2",
                "Ingl√©s 3",
                "Pr√°cticas Profesionalizantes 1",
                "Pr√°cticas Profesionalizantes 2",
                "Pr√°cticas Profesionalizantes 3",
                "Redes y Comunicaciones",
                "Seminario de actualizaci√≥n",
                "Sistemas Operativos",
                "Sistemas y Organizaciones"
            ],
            'Tecnicatura Superior en Enfermer√≠a': [
                "Aspectos Bio√©ticos y Legales de la Profesi√≥n",
                "Biolog√≠a Humana",
                "Comunicaci√≥n en Ciencias de la Salud",
                "Condiciones y Medio Ambiente del Trabajo",
                "Cuidados de la Salud Centrados en la Comunidad y la Familia",
                "Enfermer√≠a Comunitaria y Pr√°cticas Educativas en Salud",
                "Enfermer√≠a del Adulto y del Adulto Mayor I",
                "Enfermer√≠a del Adulto y el Adulto Mayor II",
                "Enfermer√≠a en Emergencias y Cat√°strofes",
                "Enfermer√≠a en Salud Mental",
                "Enfermer√≠a Materno Infantil",
                "Farmacolog√≠a en Enfermer√≠a",
                "Fundamentos del Cuidado",
                "Ingl√©s",
                "Introducci√≥n a la Metodolog√≠a de Investigaci√≥n en Salud",
                "Nutrici√≥n y Dietoterapia",
                "Organizaci√≥n y Gesti√≥n de Servicios de Enfermer√≠a",
                "Pr√°cticas Profesionalizantes 1",
                "Pr√°cticas Profesionalizantes 2",
                "Pr√°cticas Profesionalizantes 3",
                "Psicolog√≠a",
                "Salud P√∫blica 1",
                "Salud P√∫blica 2",
                "Teor√≠as Socioculturales de la Salud"
            ],
            'Tecnicatura Superior en Acompa√±amiento Terap√©utico': [
                "Acompa√±amiento Terap√©utico del Adulto y Adulto Mayor",
                "Acompa√±amiento Terap√©utico en la Ni√±ez y Adolescencia",
                "Acompa√±amiento Terap√©utico",
                "Contextualizaci√≥n del Campo Profesional del Acompa√±amiento Terap√©utico",
                "√âtica",
                "Fundamentos de Psicolog√≠a General y de Intervenci√≥n Sociocomunitaria",
                "Ingl√©s",
                "Intervenci√≥n Comunitaria y Recursos Sociales",
                "Investigaci√≥n en Salud",
                "Modalidades de Intervenci√≥n en el Acompa√±amiento Terap√©utico",
                "Modelo de Ocupaci√≥n Humana",
                "Organizaci√≥n y Gesti√≥n de los Servicios de Salud Mental",
                "Pr√°cticas Profesionalizantes I",
                "Pr√°cticas Profesionalizantes II",
                "Pr√°cticas Profesionalizantes III",
                "Principios M√©dicos y de Psicofarmacolog√≠a",
                "Psicofarmacolog√≠a",
                "Psicolog√≠a de los Ciclos Vitales",
                "Psicolog√≠a de Grupos",
                "Psicopatolog√≠a",
                "Salud P√∫blica y Salud Mental",
                "Sistemas Familiares"
            ],
            'Tecnicatura Superior en Higiene y Seguridad en el Trabajo': [
                "Administraci√≥n de las Organizaciones",
                "Capacitaci√≥n de Personal",
                "Comunicaci√≥n y Administraci√≥n de Medios",
                "Control de la Contaminaci√≥n",
                "Derecho del Trabajo",
                "Ergonom√≠a",
                "Estad√≠stica",
                "F√≠sica 1",
                "F√≠sica 2",
                "Higiene Laboral y Medio Ambiente 1",
                "Higiene Laboral y Medio Ambiente 2",
                "Ingl√©s T√©cnico",
                "Medicina del Trabajo 1",
                "Medicina del Trabajo 2",
                "Medios de Representaci√≥n",
                "Pr√°ctica Profesionalizante 1",
                "Pr√°ctica Profesionalizante 2",
                "Pr√°ctica Profesionalizante 3",
                "Psicolog√≠a Laboral",
                "Qu√≠mica 1",
                "Qu√≠mica 2",
                "Seguridad 1",
                "Seguridad 2",
                "Seguridad 3"
        ]
    };

    // ‚úÖ VERIFICACI√ìN CR√çTICA: Solo ejecutar si estamos en la p√°gina de programa
    // Verificar si existe el campo carrera Y si es el formulario de programa
    if (form && carreraSelect && materiaSelect) {
        console.log('üéØ Inicializando funcionalidad carrera-materia para programa');
        
        // Forzar el action correcto
        form.action = '/alta-programa/';
        console.log('üîß Action corregido a:', form.action);
        
        // FUNCI√ìN para cargar materias
        function cargarMaterias(carreraSeleccionada) {
            console.log('üìö Carrera seleccionada:', carreraSeleccionada);
            
            // Limpiar opciones de materia
            materiaSelect.innerHTML = '';
            
            if (carreraSeleccionada && materiasPorCarrera[carreraSeleccionada]) {
                // Agregar opci√≥n vac√≠a
                const opcionVacia = document.createElement('option');
                opcionVacia.value = '';
                opcionVacia.textContent = 'Seleccione una materia';
                materiaSelect.appendChild(opcionVacia);
                
                // Agregar materias de la carrera seleccionada
                materiasPorCarrera[carreraSeleccionada].forEach(function(materia) {
                    const option = document.createElement('option');
                    option.value = materia;
                    option.textContent = materia;
                    materiaSelect.appendChild(option);
                });
                
                materiaSelect.disabled = false;
                console.log('‚úÖ Materias cargadas:', materiasPorCarrera[carreraSeleccionada].length);
            } else {
                // No hay carrera seleccionada o no tiene materias
                const opcionVacia = document.createElement('option');
                opcionVacia.value = '';
                opcionVacia.textContent = 'Primero seleccione una carrera';
                materiaSelect.appendChild(opcionVacia);
                materiaSelect.disabled = true;
                console.log('‚ö†Ô∏è No hay materias para:', carreraSeleccionada);
            }
        }
        
        // Event listener para cambio de carrera
        carreraSelect.addEventListener('change', function() {
            cargarMaterias(this.value);
        });
        
        // Inicializar estado de materia
        materiaSelect.disabled = true;
        
        // Si ya hay una carrera seleccionada al cargar (por ejemplo, por validaci√≥n de errores)
        if (carreraSelect.value) {
            cargarMaterias(carreraSelect.value);
        }
        
        // Verificar cuando se env√≠a
        form.addEventListener('submit', function(e) {
            console.log('üöÄ PROGRAMA envi√°ndose a:', form.action);
            console.log('üöÄ Method:', form.method);
        });
        
    } else {
        console.log('‚ö†Ô∏è No se encontraron elementos necesarios para programa');
        console.log('Form:', !!form, 'Carrera:', !!carreraSelect, 'Materia:', !!materiaSelect);
    }
});
</script>
{% endblock %}