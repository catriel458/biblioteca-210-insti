<form id="form_alta_programa" method="POST" action="">
  {% csrf_token %}
  {% load static %}
  <div data-block="content" data-form-type="programa">
    <div class="row mb-3">
      <div class="col-md-3">
        <label for="profesor" style="font-size: 14px;">Profesor/a<span class="text-danger">*</span></label>
        <input type="text" class="form-control" id="profesor" name="profesor" required placeholder="Escriba aqu√≠...">
      </div>
      <div class="col-md-4">
        <label for="carrera" style="font-size: 14px;">Carrera<span class="text-danger">*</span></label>
        <select class="form-control" id="carrera" name="carrera" required>
          <option value="">A√∫n sin seleccionar</option>
          <option value="An√°lisis de Sistemas">Tecnicatura Superior en An√°lisis de Sistemas</option>
          <option value="Ciencias Pol√≠ticas">Profesorado de Educaci√≥n Secundaria en Ciencias Pol√≠ticas</option>
          <option value="Geograf√≠a">Profesorado de Educaci√≥n Secundaria en Geograf√≠a</option>
          <option value="Educaci√≥n Inicial">Profesorado de Educaci√≥n Inicial</option>
          <option value="Educaci√≥n Primaria">Profesorado de Educaci√≥n Primaria</option>
          <option value="Otra">Otra carrera</option>
        </select>
      </div>
      <div class="col-md-5">
        <label for="materia" style="font-size: 14px;">Materia<span class="text-danger">*</span></label>
        <select class="form-control" id="materia" name="materia" required disabled>
          <option value="">Primero seleccione una carrera</option>
        </select>
      </div>
    </div>
    
    <div class="row mb-3">
      <div class="col-md-7">
        <label for="url" style="font-size: 14px;">Ingresar enlace (URL)<span class="text-danger">*</span></label>
        <div class="input-group">
            <input type="url" class="form-control" id="url" name="url" required placeholder="Pegue un enlace aqu√≠...">
        </div>
      </div>
      <div class="col-md-5">
        <label for="ciclo_lectivo" style="font-size: 14px;">Ciclo lectivo<span class="text-danger">*</span></label>
        <input type="text" class="form-control" id="ciclo_lectivo" name="ciclo_lectivo" required placeholder="Escriba aqu√≠...">
      </div>
    </div>
    <!-- Contenedor para los ejemplares -->
    <div id="contenedor-ejemplares-programa" class="mb-4">
      <!-- Los ejemplares se generar√°n aqu√≠ din√°micamente -->
    </div>
  </div>
</form>

<!-- Importaci√≥n del JS din√°mico de ejemplares -->
<script src="{% static 'js/form_altas.js' %}"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const carreraSelect = document.getElementById('carrera');
    const materiaSelect = document.getElementById('materia');
    
    // Materias por carrera
    const materiasPorCarrera = {
        'Educaci√≥n Inicial': [
            'Pedagog√≠a', 'Psicolog√≠a Educacional', 'Sociolog√≠a de la Educaci√≥n', 
            'Historia y Pol√≠tica de la Educaci√≥n Argentina', 'Filosof√≠a de la Educaci√≥n',
            'Did√°ctica General', 'Curriculum y Did√°ctica del Nivel Inicial', 
            'Juego y Desarrollo Infantil', 'Literatura Infantil', 'Matem√°tica y su Did√°ctica',
            'Ciencias Sociales y su Did√°ctica', 'Ciencias Naturales y su Did√°ctica',
            'Lengua y su Did√°ctica', 'Educaci√≥n Art√≠stica', 'Educaci√≥n F√≠sica',
            'Pr√°ctica Docente I', 'Pr√°ctica Docente II', 'Pr√°ctica Docente III', 'Pr√°ctica Docente IV'
        ],
        'Educaci√≥n Primaria': [
            'Pedagog√≠a', 'Psicolog√≠a Educacional', 'Sociolog√≠a de la Educaci√≥n',
            'Historia y Pol√≠tica de la Educaci√≥n Argentina', 'Filosof√≠a de la Educaci√≥n',
            'Did√°ctica General', 'Curriculum y Did√°ctica del Nivel Primario',
            'Matem√°tica y su Did√°ctica I', 'Matem√°tica y su Did√°ctica II',
            'Lengua y su Did√°ctica I', 'Lengua y su Did√°ctica II',
            'Ciencias Sociales y su Did√°ctica I', 'Ciencias Sociales y su Did√°ctica II',
            'Ciencias Naturales y su Did√°ctica I', 'Ciencias Naturales y su Did√°ctica II',
            'Educaci√≥n Art√≠stica', 'Educaci√≥n F√≠sica', 'Tecnolog√≠as de la Informaci√≥n',
            'Pr√°ctica Docente I', 'Pr√°ctica Docente II', 'Pr√°ctica Docente III', 'Pr√°ctica Docente IV'
        ],
        'Geograf√≠a': [
            'Pedagog√≠a', 'Psicolog√≠a Educacional', 'Sociolog√≠a de la Educaci√≥n',
            'Historia y Pol√≠tica de la Educaci√≥n Argentina', 'Filosof√≠a de la Educaci√≥n',
            'Did√°ctica General', 'Did√°ctica de la Geograf√≠a',
            'Geograf√≠a F√≠sica I', 'Geograf√≠a F√≠sica II', 'Geograf√≠a Humana I', 'Geograf√≠a Humana II',
            'Geograf√≠a de Am√©rica', 'Geograf√≠a de Argentina', 'Geograf√≠a Mundial',
            'Cartograf√≠a', 'Climatolog√≠a', 'Geomorfolog√≠a', 'Biogeograf√≠a',
            'Geograf√≠a Econ√≥mica', 'Geograf√≠a Urbana y Rural', 'Epistemolog√≠a de la Geograf√≠a',
            'Pr√°ctica Docente I', 'Pr√°ctica Docente II', 'Pr√°ctica Docente III', 'Pr√°ctica Docente IV'
        ],
        'Ciencias Pol√≠ticas': [
            'Pedagog√≠a', 'Psicolog√≠a Educacional', 'Sociolog√≠a de la Educaci√≥n',
            'Historia y Pol√≠tica de la Educaci√≥n Argentina', 'Filosof√≠a de la Educaci√≥n',
            'Did√°ctica General', 'Did√°ctica de las Ciencias Pol√≠ticas',
            'Teor√≠a Pol√≠tica', 'Historia Pol√≠tica Argentina', 'Historia Pol√≠tica Mundial',
            'Sistemas Pol√≠ticos Comparados', 'Relaciones Internacionales', 'Derecho Constitucional',
            'Sociolog√≠a Pol√≠tica', 'Econom√≠a Pol√≠tica', 'Filosof√≠a Pol√≠tica',
            'Pr√°ctica Docente I', 'Pr√°ctica Docente II', 'Pr√°ctica Docente III', 'Pr√°ctica Docente IV'
        ],
        'An√°lisis de Sistemas': [
            'Matem√°tica', 'Algoritmos y Estructuras de Datos', 'Programaci√≥n I', 'Programaci√≥n II',
            'Base de Datos I', 'Base de Datos II', 'Sistemas Operativos', 'Redes y Comunicaciones',
            'Ingenier√≠a de Software I', 'Ingenier√≠a de Software II', 'An√°lisis de Sistemas',
            'Dise√±o de Sistemas', 'Gesti√≥n de Proyectos', 'Seguridad Inform√°tica',
            'Desarrollo Web', 'Programaci√≥n M√≥vil', 'Inteligencia Artificial',
            'Pr√°ctica Profesional I', 'Pr√°ctica Profesional II'
        ]
    };
    
    // Funci√≥n para cargar materias seg√∫n la carrera seleccionada
    function cargarMaterias(carreraSeleccionada) {
        console.log('üìö Carrera seleccionada:', carreraSeleccionada);
        
        // Limpiar opciones de materia
        materiaSelect.innerHTML = '';
        
        if (carreraSeleccionada && materiasPorCarrera[carreraSeleccionada]) {
            // Agregar opci√≥n vac√≠a
            const opcionVacia = document.createElement('option');
            opcionVacia.value = '';
            opcionVacia.textContent = 'Seleccione una materia';
            materiaSelect.appendChild(opcionVacia);
            
            // Agregar materias de la carrera seleccionada
            materiasPorCarrera[carreraSeleccionada].forEach(function(materia) {
                const option = document.createElement('option');
                option.value = materia;
                option.textContent = materia;
                materiaSelect.appendChild(option);
            });
            
            materiaSelect.disabled = false;
            console.log('‚úÖ Materias cargadas:', materiasPorCarrera[carreraSeleccionada].length);
        } else {
            // No hay carrera seleccionada o no tiene materias
            const opcionVacia = document.createElement('option');
            opcionVacia.value = '';
            opcionVacia.textContent = 'Primero seleccione una carrera';
            materiaSelect.appendChild(opcionVacia);
            materiaSelect.disabled = true;
            console.log('‚ö†Ô∏è No hay materias para:', carreraSeleccionada);
        }
    }
    
    // Event listener para cambio de carrera
    carreraSelect.addEventListener('change', function() {
        cargarMaterias(this.value);
    });
    
    // Inicializar estado de materia
    materiaSelect.disabled = true;
    
    // Si ya hay una carrera seleccionada al cargar (por ejemplo, por validaci√≥n de errores)
    if (carreraSelect.value) {
        cargarMaterias(carreraSelect.value);
    }
    
    console.log('‚úÖ Funcionalidad carrera-materia inicializada correctamente');
});
</script>