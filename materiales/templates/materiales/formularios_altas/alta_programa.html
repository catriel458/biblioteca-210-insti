{% load static %}
<form id="form_alta_programa" method="POST" action="" data-form-type="programa">
  {% csrf_token %}
  <div data-block="content" data-form-type="programa">
    <div class="row mb-3">
      <div class="col-md-3">
        <label for="profesor" style="font-size: 14px;">Profesor/a<span class="text-danger">*</span></label>
        <input type="text" class="form-control" id="profesor" name="profesor" required placeholder="Escriba aquí...">
      </div>
      <div class="col-md-4">
        <label for="carrera" style="font-size: 14px;">Carrera<span class="text-danger">*</span></label>
        <select class="form-control" id="carrera" name="carrera" required>
          <option value="">Aún sin seleccionar</option>
          <option value="Análisis de Sistemas">Tecnicatura Superior en Análisis de Sistemas</option>
          <option value="Ciencias Políticas">Profesorado de Educación Secundaria en Ciencias Políticas</option>
          <option value="Geografía">Profesorado de Educación Secundaria en Geografía</option>
          <option value="Educación Inicial">Profesorado de Educación Inicial</option>
          <option value="Educación Primaria">Profesorado de Educación Primaria</option>
          <option value="Otra">Otra carrera</option>
        </select>
      </div>
      <div class="col-md-5">
        <label for="materia" style="font-size: 14px;">Materia<span class="text-danger">*</span></label>
        <select class="form-control" id="materia" name="materia" required disabled>
          <option value="">Primero seleccione una carrera</option>
        </select>
      </div>
    </div>
    
    <div class="row mb-3">
      <div class="col-md-7">
        <label for="url" style="font-size: 14px;">Ingresar enlace (URL)<span class="text-danger">*</span></label>
        <div class="input-group">
            <input type="url" class="form-control" id="url" name="url" required placeholder="Pegue un enlace aquí...">
        </div>
      </div>
      <div class="col-md-5">
        <label for="ciclo_lectivo" style="font-size: 14px;">Ciclo lectivo<span class="text-danger">*</span></label>
        <input type="text" class="form-control" id="ciclo_lectivo" name="ciclo_lectivo" required placeholder="Escriba aquí...">
      </div>
    </div>
    <!-- Contenedor para los ejemplares -->
    <div id="contenedor-ejemplares-programa" class="mb-4">
      <!-- Los ejemplares se generarán aquí dinámicamente -->
    </div>
  </div>
  
  <!-- Botones de acción -->
  <div class="row mt-3">
    <div class="col-12 text-end">
      <button type="button" class="btn btn-secondary" onclick="cancelarFormulario()">Cancelar</button>
      <button type="submit" class="btn btn-primary">Guardar</button>
    </div>
  </div>
</form>

<!-- Modal para vaciar campos -->
<div class="modal-backdrop fade" id="modal-backdrop" style="display: none;"></div>
<div class="modal fade" id="modal-vaciar-campos" tabindex="-1" aria-labelledby="modalVaciarCamposLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalVaciarCamposLabel">¿Desea vaciar los campos?</h5>
        <button type="button" class="btn-close" onclick="cerrarModal()" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>¿Está seguro que desea vaciar todos los campos del formulario?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" onclick="cerrarModal()">CANCELAR</button>
        <button type="button" class="btn btn-primary" onclick="confirmarModal()">CONFIRMAR</button>
      </div>
    </div>
  </div>
</div>

<!-- Importación del JS dinámico de ejemplares -->
<script src="{% static 'js/form_altas.js' %}"></script>

<!-- Importación del JS de alertas -->
<script src="{% static 'js/alertas.js' %}"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const carreraSelect = document.getElementById('carrera');
    const materiaSelect = document.getElementById('materia');
    
    // Materias por carrera
    const materiasPorCarrera = {
        'Educación Inicial': [
            'Pedagogía', 'Psicología Educacional', 'Sociología de la Educación', 
            'Historia y Política de la Educación Argentina', 'Filosofía de la Educación',
            'Didáctica General', 'Curriculum y Didáctica del Nivel Inicial', 
            'Juego y Desarrollo Infantil', 'Literatura Infantil', 'Matemática y su Didáctica',
            'Ciencias Sociales y su Didáctica', 'Ciencias Naturales y su Didáctica',
            'Lengua y su Didáctica', 'Educación Artística', 'Educación Física',
            'Práctica Docente I', 'Práctica Docente II', 'Práctica Docente III', 'Práctica Docente IV'
        ],
        'Educación Primaria': [
            'Pedagogía', 'Psicología Educacional', 'Sociología de la Educación',
            'Historia y Política de la Educación Argentina', 'Filosofía de la Educación',
            'Didáctica General', 'Didáctica de la Lengua y la Literatura', 
            'Didáctica de la Matemática', 'Didáctica de las Ciencias Sociales',
            'Didáctica de las Ciencias Naturales', 'Educación Tecnológica',
            'Educación Artística', 'Educación Física', 'Práctica Docente I',
            'Práctica Docente II', 'Práctica Docente III', 'Práctica Docente IV'
        ]
    };
    
    carreraSelect.addEventListener('change', function() {
        const carreraSeleccionada = this.value;
        materiaSelect.innerHTML = '';
        materiaSelect.disabled = true;
        
        if (carreraSeleccionada && materiasPorCarrera[carreraSeleccionada]) {
            materiaSelect.disabled = false;
            
            // Opción por defecto
            const defaultOption = document.createElement('option');
            defaultOption.value = '';
            defaultOption.textContent = 'Seleccione una materia';
            materiaSelect.appendChild(defaultOption);
            
            // Agregar materias según la carrera seleccionada
            materiasPorCarrera[carreraSeleccionada].forEach(materia => {
                const option = document.createElement('option');
                option.value = materia;
                option.textContent = materia;
                materiaSelect.appendChild(option);
            });
        } else {
            // Si no hay carrera seleccionada o no hay materias para esa carrera
            const defaultOption = document.createElement('option');
            defaultOption.value = '';
            defaultOption.textContent = 'Primero seleccione una carrera';
            materiaSelect.appendChild(defaultOption);
        }
    });
});
</script>